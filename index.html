<!DOCTYPE html>
<html lang = 'en'>
<head>
  <title> 3300 Hw7 </title>
  <meta charset="utf-8"/>
  <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
  <h2>3300 HW7</h2>
  <p>
  Name: Joshua Hong <br>
  NetID: jh976 <br>
  Date: 4/23/2019
  </p>
  <p>
    #1.
  </p>
  <p>
    <canvas width="320px" height="320px" class="model"></canvas>
    <div>
     <span>color</span>
     <input type="range" min="0" max="150" step="1" id="slider">
     <!-- <span id="densityLabel"></span> -->
   </div>
  </p>
<script>
  // d3.select("canvas.model").attr("width", width).attr("height", height);
  let canvas = document.querySelector("canvas.model");
  let d_context = canvas.getContext("2d");
  let image = d_context.getImageData(0, 0, canvas.width, canvas.height);
  console.log(image)
  let pixels = image.data;
  const a_scale = d3.scaleLinear().domain([0,canvas.width]).range([-160,160])
  const b_scale = d3.scaleLinear().domain([0,canvas.height]).range([160,-160])

  function rgbAtLocation(lum, x, y){
    var lab = d3.lab(lum,a_scale(x),b_scale(y));
    var convert = lab.rgb();
    return convert
  };
  function fillCanvas(lum){
    rgbAtLocation(lum, x, y)
    for (let y = 0; y < 320; y++) {
       for (let x = 0; x < 320; x++) {
        pixels[4*(y*320 + x)] = rgbAtLocation.r[d_context[y][x]]
        pixels[4*(y*320 + x)] = rgbAtLocation.g[d_context[y][x]]
        pixels[4*(y*320 + x)] = rgbAtLocation.b[d_context[y][x]]
        pixels[4*(y*320 + x)] = 255;
     }
   }
   d_context.putImageData(image, 0, 0);
 };
 var slider = d3.select("#slider")
     .on("input", function () {
       lum = this.value
       fillCanvas(lum)
   });
fillCanvas(0);



</script>

</body>
